<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Utils\assets\scripts\DelayedTask.js 源码</title>
		<link href="../../assets/styles/prettify.css" type="text/css" rel="stylesheet" />
		<script src="../../assets/scripts/prettify.js" type="text/javascript"></script>
		<style type="text/css">.highlight { display: block; background-color: #ddd; }</style>
</head>
<body onload="setTimeout('prettyPrint()', 0);var node = document.getElementById(location.hash.replace(/#/, ''));if(node)node.className = 'highlight';"><pre class="prettyprint lang-js">//===========================================
//  表示延时的任务   delayedtask.js  A
//===========================================


	
	
	
namespace(&quot;.DelayedTask&quot;, JPlus.Class({
	
	constructor: function(fn, scope, args) {
		var id = null, d, t;
		
	},
	
	call: function() {
			var now = new Date().getTime();
			if (now - t &gt;= d) {
				clearInterval(id);
				id = null;
				fn.apply(scope, args || []);
			}
		},
	
		delay: function(delay, newFn, newScope, newArgs) {
			if (id &amp;&amp; delay != d) {
				this.cancel();
			}
			d = delay;
			t = new Date().getTime();
			fn = newFn || fn;
			scope = newScope || scope;
			args = newArgs || args;
			if (!id) {
				id = setInterval(call, d);
			}
		},
	
	cancel: function() {
			if (id) {
				clearInterval(id);
				id = null;
			}
		}
}));</pre>
</body>
</html>
