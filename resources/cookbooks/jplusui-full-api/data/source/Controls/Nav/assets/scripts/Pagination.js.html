<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Controls\Nav\assets\scripts\Pagination.js 源码</title>
		<link href="../../assets/styles/prettify.css" type="text/css" rel="stylesheet" />
		<script src="../../assets/scripts/prettify.js" type="text/javascript"></script>
		<style type="text/css">.highlight { display: block; background-color: #ddd; }</style>
</head>
<body onload="setTimeout('prettyPrint()', 0);var node = document.getElementById(location.hash.replace(/#/, ''));if(node)node.className = 'highlight';"><pre class="prettyprint lang-js">/**
 * @author xuld
 */


using(&quot;Controls.Core.Base&quot;);


var Pagination = Control.extend({

    pageCount: 1,

    xtype: 'pagination',

    tpl: '&lt;ul class=&quot;x-control&quot;&gt;&lt;/ul&gt;',

    onClick: function (e) {
        var page = e.getTarget().getAttr('data-pagination');
        if (page) {
            this.update(page);
            this.trigger('change', page);
        }
        return false;
    },

    init: function () {
        this.update(1);
        this.on('click', this.onClick);
    },

    update: function (value) {
        if (value &lt;= 0 || value &gt; this.pageCount)
            return;

        var html = '';

        if (currentPage === 0) {
            html += '&lt;li class=&quot;x-pagination-disabled x-pagination-first&quot;&gt;&lt;a href=&quot;#&quot; title=&quot;上一页&quot;&gt;&#171;&lt;/a&gt;&lt;/li&gt;';
        } else {
            html += '&lt;li class=&quot;x-pagination-first&quot;&gt;&lt;a href=&quot;#&quot; title=&quot;上一页&quot; data-pagination=&quot;1&quot;&gt;&#171;&lt;/a&gt;&lt;/li&gt;';
        }

        var left = 1, right = this.pageCount;

        for (var i = left; i &lt; currentPage; i++) {
            html += '&lt;li&gt;&lt;a href=&quot;#&quot; data-pagination=&quot;' + i + '&quot;&gt;' + i + '&lt;/a&gt;&lt;/li&gt;';
        }

        html += '&lt;li class=&quot;x-pagination-selected&quot;&gt;&lt;span&gt;' + currentPage + '&lt;/span&gt;&lt;/li&gt;';

        for (var i = currentPage + 1; i &lt; right; i++) {
            html += '&lt;li&gt;&lt;a href=&quot;#&quot; data-pagination=&quot;' + i + '&quot;&gt;' + i + '&lt;/a&gt;&lt;/li&gt;';
        }

        this.node.innerHTML = html;

    }

});</pre>
</body>
</html>
