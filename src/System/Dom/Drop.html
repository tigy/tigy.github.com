<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="dpl-info" content="status=beta">
    <title>拖放</title>
    <script src="../../System/Core/assets/scripts/Base.js" type="text/javascript"></script>
    <script src="../../System/Dom/assets/scripts/Base.js" type="text/javascript"></script>
    <script src="../../System/Fx/assets/scripts/Base.js" type="text/javascript"></script>
    <script src="../../System/Fx/assets/scripts/Animate.js" type="text/javascript"></script>
    <script src="../../System/Dom/assets/scripts/Drag.js" type="text/javascript"></script>
    <script src="../../System/Dom/assets/scripts/Drop.js" type="text/javascript"></script>

    <script src="../../../assets/demo/demo.js" type="text/javascript"></script>
    <style>
        #drag {
            height: 90px;
        }

        .zone {
            height: 60px;
            padding: 10px;
            border: 1px #C6D880 solid;
            margin-bottom: 30px;
        }

        .demo-box-small {
            cursor: move;
            border: 1px dotted transparent;
        }

        .hover {
            border: 1px dotted blue;
            color: #999;
            background: none;
        }
    </style>
</head>
<body>
    <article class="demo">
        <div id="drag">
            <div id="d1" class="demo-box-small demo-blue">1</div>
            <div id="d2" class="demo-box-small demo-purple">2</div>
            <div id="d3" class="demo-box-small demo-indigo">3</div>
            <div id="d4" class="demo-box-small demo-green">4</div>
            <div id="d5" class="demo-box-small demo-purple">5</div>
            <div id="d6" class="demo-box-small demo-indigo">6</div>
            <div id="d7" class="demo-box-small demo-blue">7</div>
        </div>
        <div id="drop">
            <div id="z1" class="zone"></div>
            <div id="z2" class="zone"></div>
            <div id="z3" class="zone"></div>
        </div>
        <script>


            // 让 小方块 可拖动。
            $('drag').query('.demo-box-small').draggable(true);

            // 拖入之后，创建虚位。
            $('drop').query('.zone').on('dragenter', function (e) {
                this.dom.hover = Dom.create('div', 'demo-box-small hover').setHtml(e.dragTarget.dom.id.substr(1));
                this.append(this.dom.hover);

                // 拖到外面时，隐藏虚位。
            }).on('dragleave', function (e) {
                this.dom.hover.remove();

                // 放置时，隐藏虚位，并添加方块。
            }).on('drop', function (e) {
                this.dom.hover.remove();
                e.dragTarget.setOffset({ x: 0, y: 0 });
                this.append(e.dragTarget);
            });

        </script>
    </article>
</body>
</html>
