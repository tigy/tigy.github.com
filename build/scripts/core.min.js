function trace(){var t,i,n,r;if(arguments.length===0&&!trace.$count)return trace("(trace: "+trace.$count+++")");if(trace.enable){if(t=window.console,t&&console.debug&&console.debug.apply)return console.debug.apply(console,arguments);if(t&&console.log&&console.log.apply)return console.log.apply(console,arguments);for(n=0,r=[];n<arguments.length;n++)r[n]=trace.inspect(arguments[n]);return i=r.join(" "),t&&console.log?console.log(i):alert(i)}}function assert(n,t){var i,r;if(!n){i=arguments;switch(i.length){case 1:t="断言失败";case 2:break;case 0:return!0;default:r=2,t=t.replace(/\{([\w\.\(\)]*?)\}/g,function(n,t){return"参数 "+(i.length<=r?n:t+" = "+trace.ellipsis(trace.inspect(i[r++]),200))})}if(assert.stackTrace){for(i=i.callee.caller;i&&i.debugStepThrough;)i=i.caller;i&&i.caller&&(i=i.caller),i&&(t+="\r\n--------------------------------------------------------------------\r\n"+trace.ellipsis(trace.decodeUTF8(i.toString()),600))}window.trace.error(t)}return!!n}function using(n,t){var u,s,f,r,h,e,c,i,l,o;for(assert.isString(n,"using(ns): {ns} 不是合法的组件全名。"),u=using[t?"styles":"scripts"],i=0;i<u.length;i++)if(u[i]===n)return;for(u.push(n),n=using.resolve(n,t),t?(s="LINK",f="href",r=[".css"],h=using.loadStyle):(s="SCRIPT",f="src",r=[".js"],h=using.loadScript),e=document.getElementsByTagName(s),c=n.replace(/^[\.\/\\]+/,""),i=0;e[i];i++)for(l=(document.constructor?e[i][f]:e[i].getAttribute(f,4))||"",o=0;o<r.length;o++)if(l.indexOf(c+r[o])>=0)return;h(using.rootPath+n+r[0])}function imports(n){return using(n,!0)}var Deferrable,Ajax,Fx;(function(n,t){function f(n,t){assert(n!=null,"Object.extend(dest, src): {dest} 不可为空。",n);for(var i in t)n[i]=t[i];return n}function e(n,t){assert(typeof n=="function","Array#each(fn, scope): {fn} 必须是一个函数。",n);for(var i=-1,r=this;++i<r.length;)if(n.call(t,r[i],i,r)===!1)return!1;return!0}function o(){}function s(){}function l(n,t){return t.toUpperCase()}function h(n,t){for(var i=n.constructor,r;!(r=i.$event)||!(t in r);)if(!(i=i.base))return c;return r[t]}var a=n.document,i=n.Object,r=Array.prototype,v=i.prototype.toString,y=i.prototype.hasOwnProperty,c={},u=n.JPlus={Base:o,Native:function(n){return f(n,p)},id:1,version:1},p={implement:function(n){return assert(this.prototype,"MyClass.implement(members): 无法扩展当前类，因为当前类的 prototype 为空。"),i.extend(this.prototype,n),this},implementIf:function(n){return assert(this.prototype,"MyClass.implementIf(members): 无法扩展当前类，因为当前类的 prototype 为空。"),i.extendIf(this.prototype,n),this},defineMethods:function(n,r,u){assert.isString(r,"MyClass.defineMethods(targetProperty, methods): {methods} ~");var f;return/\(\)$/.test(n)&&(f=n.substr(0,n.length-2)),this.implement(i.map(r,function(i){return function(r,u,e){var s=f?this[f]():this[n],o;return assert(s,"#"+n+" 不能为空。"),assert(!s||s[i],"#"+n+"."+i+"(): 不是函数。"),o=s[i],o=o.apply?o.apply(s,arguments):o(r,u,e),s===o||o===t?this:o}},{}),u)},addEvents:function(n,t){assert.isString(n,"MyClass.addEvents(eventName, properties): {eventName} ~");var u=this.$event||(this.$event={}),r=u.$default;return t?(i.extendIf(t,r),t.base&&(assert(r,"使用 base 字段功能必须预先定义 $default 事件。"),t.add=function(n,t,i){r.add(n,this.base,i)},t.remove=function(n,t,i){r.remove(n,this.base,i)})):t=r||c,i.map(n,t,u),this},extend:function(n){var t=n&&n.hasOwnProperty("constructor")?n.constructor:function(){arguments.callee.base.apply(this,arguments)};return s.prototype=(t.base=this).prototype,t.prototype=i.extend(new s,n),t.prototype.constructor=t,s.prototype=null,u.Native(t)}};f(i,{extend:function(){for(var n in{toString:1})return f;return u.enumerables="toString hasOwnProperty valueOf constructor isPrototypeOf".split(" "),function(n,t){if(t){assert(n!=null,"Object.extend(dest, src): {dest} 不可为空。",n);for(var r=u.enumerables.length,i;r--;)y.call(t,i=u.enumerables[r])&&(n[i]=t[i]);f(n,t)}return n}}(),extendIf:function(n,i){assert(n!=null,"Object.extendIf(dest, src): {dest} 不可为空。",n);for(var r in i)n[r]===t&&(n[r]=i[r]);return n},each:function(n,t,i){if(assert(typeof n!="function","Object.each(iterable, fn, scope): {iterable} 不能是函数。 ",n),assert(typeof t=="function","Object.each(iterable, fn, scope): {fn} 必须是函数。",t),n!=null)if(typeof n.length!="number"){for(var r in n)if(t.call(i,n[r],r,n)===!1)return!1}else return e.call(n,t,i);return!0},map:function(n,t,r){var u;return typeof n=="string"?(n=n.split(" "),u=typeof t=="function"?r?function(n,i,r){this[n]=t(n,i,r)}:t:function(n){this[n]=t}):(r=typeof n.length!="number"?{}:[],u=function(n,i,r){this[i]=t(n,i,r)}),i.each(n,u,r),r}}),Function.empty=s,String.format=function(n,t){assert(!n||n.replace,"String.format(formatString, args): {formatString} 必须是字符串。",n);var i=this;return t=arguments.length===2&&t&&typeof t=="object"?t:r.slice.call(arguments,1),n?n.replace(/\{+?(\S*?)\}+/g,function(n,r){var u=n.charAt(1)=="{",f=n.charAt(n.length-2)=="}";return u||f?n.slice(u,n.length-f):r in t?i(t[r]):""}):""},Array.isArray||(Array.isArray=function(n){return v.call(n)==="[object Array]"}),Date.now||(Date.now=function(){return+new Date}),n.Class=function(n){return o.extend(n)},n.execScript||(n.execScript=function(t){assert.isString(t,"execScript(statements): {statements} ~"),n.eval.call(n,t)}),function(n){var r=n.userAgent,t=r.match(/(IE|Firefox|Chrome|Safari|Opera)[\/\s]([\w\.]*)/i)||r.match(/(WebKit|Gecko)[\/\s]([\w\.]*)/i)||[0,"",0],i=t[1],u=!!+"\v1";n["is"+i]=n["is"+i+parseInt(t[2])]=!0,f(n,{isStd:u,isQuirks:!u&&typeof a.constructor!="object",name:i,version:t[2]})}(n.navigator),e.call([String,Array,Function,Date,o],u.Native),o.implement({dataField:function(){return this.$data||(this.$data={})},base:function(n){var i=this.constructor,t=this[n],u=t,r=arguments;assert(t,"JPlus.Base#base(fnName, args): 子类不存在 {fnName} 的属性或方法。",n),t.$bubble=!0,assert(!i||i.prototype[n],"JPlus.Base#base(fnName, args): 父类不存在 {fnName} 的方法。",n);do i=i.base,assert(i&&i.prototype[n],"JPlus.Base#base(fnName, args): 父类不存在 {fnName} 的方法。",n);while("$bubble"in(t=i.prototype[n]));assert.isFunction(t,"JPlus.Base#base(fnName, args): 父类的成员 {fn}不是一个函数。  "),t.$bubble=!0;try{return r.length<=1?t.apply(this,r.callee.caller.arguments):(r[0]=this,t.call.apply(t,r))}finally{delete t.$bubble,delete u.$bubble}},on:function(n,t,i){assert.isFunction(t,"JPlus.Base#on(eventName, eventHandler, scope): {eventHandler} ~");var r=this,e=r.dataField(),u,f;return e=e.$event||(e.$event={}),u=e[n],i=[t,i||r],u?u.handlers.push(i):(f=h(r,n),e[n]=u=function(n){for(var i=arguments.callee,r=i.handlers.slice(0),t,u=-1,f=r.length;++u<f;)if(t=r[u],t[0].call(t[1],n)===!1)return t[2]!==!0&&(t=i.stop)&&t[0].call(t[1],n),!1;return!0},u.handlers=f.initEvent?[[f.initEvent,r,!0],i]:[i],f.stopEvent&&(u.stop=[f.stopEvent,r]),f.add&&f.add(r,n,u)),r},trigger:function(n,t){var r=this,i=r.dataField().$event,u;return!i||!(i=i[n])||((u=h(r,n)).dispatch?u.dispatch(r,n,i,t):i(t))},un:function(n,t){assert(!t||typeof t=="function","JPlus.Base#un(eventName, eventHandler): {eventHandler} 必须是函数。",t);var u=this,i=u.dataField().$event,e,f,r;if(i)if(e=i[n]){if(t)for(f=e.handlers,r=f.length;r-->0;)if(f[r][0]===t){f.splice(r,1),r&&(r!==1||f[0]!==!0)||(t=0);break}t||(delete i[n],i=h(u,n),i.remove&&i.remove(u,n,e))}else if(!n)for(n in i)u.un(n);return u},once:function(n,t,i){assert.isFunction(t,"JPlus.Base#once(eventName, eventHandler): {eventHandler} ~");return this.on(n,function(){this.un(n,t).un(n,arguments.callee)}).on(n,t,i)}}),String.implementIf({trim:function(){return this.replace(/^[\s\u00A0]+|[\s\u00A0]+$/g,"")},toCamelCase:function(){return this.replace(/-(\w)/g,l)},capitalize:function(){return this.replace(/(\b[a-z])/g,l)}}),Function.implementIf({bind:function(n){var t=this;return function(){return t.apply(n,arguments)}}}),Array.implementIf({each:e,include:function(n){var t=this.indexOf(n)>=0;return t||this.push(n),t},invoke:function(n,t){assert(!t||typeof t.length=="number","Array#invoke(fnName, args): {args} 必须是参数数组。",t);var i=[];return r.forEach.call(this,function(r){assert(r!=null&&r[n]&&r[n].apply,"Array#invoke(fnName, args): {value} 不包含函数 {fnName}。",r,n),i.push(r[n].apply(r,t||[]))}),i},unique:function(){for(var t=0,n,i;t<this.length;){i=this[t],n=++t;do n=r.remove.call(this,i,n);while(n>=0)}return this},remove:function(n,t){var i=r.indexOf.call(this,n,t);return i!==-1&&r.splice.call(this,i,1),i},item:function(n){return this[n<0?this.length+n:n]},indexOf:function(n,t){t=t||0;for(var i=this.length;t<i;t++)if(this[t]===n)return t;return-1},filter:function(n,t){assert.isFunction(n,"Array#filter(fn, scope): {fn} ~");var i=[];return r.forEach.call(this,function(r,u,f){n.call(t,r,u,f)&&i.push(r)}),i},forEach:e})})(this),JPlus.Base.prototype.toString=function(){for(var n in window)if(window[n]===this.constructor)return n;return Object.prototype.toString.call(this)},function(){function n(n,t){var i=function(i,r){return assert(n(i),(r||"断言失败。").replace("~",t),i)};return i.debugStepThrough=!0,i}function t(n,t){assert(n!=null,"Object.extend(dest, src): {dest} 不可为空。",n);for(var i in t)n[i]=t[i];return n}t(trace,{enable:!0,ellipsis:function(n,t){return n.length>t?n.substr(0,t-3)+"...":n},decodeUTF8:function(n){return n.replace(/\\u([0-9a-f]{3})([0-9a-f])/gi,function(n,t,i){return String.fromCharCode(parseInt(t,16)*16+parseInt(i,16))})},api:function(){function o(n){for(var t in n)n[t]=n[t].split(" ")}function h(n){for(n in n||{})return!1;return!0}function t(n,t){return n=n.charCodeAt(t),n<=90&&n>=65}function s(n,i){return typeof n=="function"&&i==="constructor"?"构造函数":n.prototype&&n.prototype.constructor?!h(n.prototype)||t(i,0)?"类":"函数":n&&typeof n=="object"?i.charAt(0)==="I"&&t(i,1)?"接口":"对象":"属性"}function r(n,t){return t+" "+s(n[t],t)}var u="Window Element Attr Text CDATASection Entity EntityReference ProcessingInstruction Comment HTMLDocument DocumentType DocumentFragment Document Node".split(" "),n="String Date Array Number RegExp Function XMLHttpRequest Object".split(" ").concat(u),i={Object:"valueOf hasOwnProperty toString",String:"length charAt charCodeAt concat indexOf lastIndexOf match quote slice split substr substring toLowerCase toUpperCase trim sub sup anchor big blink bold small fixed fontcolor italics link",Array:"length pop push reverse shift sort splice unshift concat join slice indexOf lastIndexOf filter forEach",Number:"toExponential toFixed toLocaleString toPrecision",Function:"length extend call",Date:"getDate getDay getFullYear getHours getMilliseconds getMinutes getMonth getSeconds getTime getTimezoneOffset getUTCDate getUTCDay getUTCFullYear getUTCHours getUTCMinutes getUTCMonth getUTCSeconds getYear setDate setFullYear setHours setMinutes setMonth setSeconds setTime setUTCDate setUTCFullYear setUTCHours setUTCMilliseconds setUTCMinutes setUTCMonth setUTCSeconds setYear toGMTString toLocaleString toUTCString",RegExp:"exec test"},f={Array:"isArray",Number:"MAX_VALUE MIN_VALUE NaN NEGATIVE_INFINITY POSITIVE_INFINITY",Date:"now parse UTC"},e=function(n,t){var i,r;this.members={},this.sortInfo={},this.showPredefinedMembers=t!==!1,this.isClass=n===Function||n.prototype&&n.prototype.constructor!==Function,this.isClass||n.constructor===Object||(this.prefix=this.getPrefix(n.constructor),this.prefix||(i=n.replaceChild?n.nodeType:n.setInterval&&n.clearTimeout?0:null,i&&(this.prefix=this.memberName=u[i],this.prefix&&(this.baseClassNames=["Node","Element","HTMLElement","Document"],this.baseClasses=[window.Node,window.Element,window.HTMLElement,window.HTMLDocument]))),this.prefix&&(this.title=this.prefix+this.getBaseClassDescription(n.constructor)+"的实例成员: ",this.prefix+=".prototype."),[Number,String,Boolean].indexOf(n.constructor)===-1&&(r=this.getPrefix(n),r&&(this.orignalPrefix=r+"."))),this.prefix||(this.prefix=this.getPrefix(n),this.prefix&&(this.title=this.prefix+(this.isClass?this.getBaseClassDescription(n):" "+s(n,this.memberName))+"的成员: ",this.prefix+=".")),this.isClass?(this.getExtInfo(n),this.addStaticMembers(n),this.addStaticMembers(n.prototype,1,!0),this.addEvents(n,""),delete this.members.prototype,this.showPredefinedMembers&&(this.addPredefinedNonStaticMembers(n,n.prototype,!0),this.addPredefinedMembers(n,n,f))):(this.getExtInfo(n.constructor),this.addStaticMembers(n),this.showPredefinedMembers&&n.constructor&&this.addPredefinedNonStaticMembers(n.constructor,n))};return e.prototype={memberName:"",title:"API 信息:",prefix:"",getPrefix:function(t){if(!t)return"";for(var i=0;i<n.length;i++)if(window[n[i]]===t)return this.memberName=n[i];return this.getTypeName(t,window,"",3)},getTypeName:function(n,i,r,u){var f;for(f in i)if(i[f]===n)return this.memberName=f,r+f;if(u-->0)for(f in i)try{if(i[f]&&t(f,0)&&(f=this.getTypeName(n,i[f],r+f+".",u),f))return f}catch(e){}return""},getBaseClassDescription:function(n){if(n&&n.base&&n.base!==JPlus.Object){var t=this.getTypeName(n.base,window,"",3);return" 类"+(t&&t!="System.Object"?"(继承于 "+t+" 类)":"")}return" 类"},getExtInfo:function(n){if(!this.baseClasses)for(this.baseClassNames=[],this.baseClasses=[];n&&n.prototype;){var t=this.getPrefix(n);t&&(this.baseClasses.push(n),this.baseClassNames.push(t)),n=n.base}},addStaticMembers:function(n,t){for(var i in n)this.addMember(n,i,1,t)},addPredefinedMembers:function(n,t,i,r){for(var u in i)n===window[u]&&i[u].forEach(function(n){this.addMember(t,n,5,r)},this)},addPredefinedNonStaticMembers:function(n,t,r){(n!==Object&&i.Object.forEach(function(i){n.prototype[i]!==Object.prototype[i]&&this.addMember(t,i,5,r)},this),n!==Object||this.isClass)&&this.addPredefinedMembers(n,t,i,r)},addEvents:function(n,t){var r=n.$event,i;if(r){for(i in r)this.sortInfo[this.members[i]=i+" 事件"+t]=4+i;n.base&&this.addEvents(n.base,"(继承的)")}},addMember:function(n,t,i,u){try{var o=Object.prototype.hasOwnProperty,s=o.call(n,t),f,e="";u=u?"prototype.":"",s?(f=this.orignalPrefix||this.prefix+u,i--):(this.baseClasses.each(function(i,r){if(i.prototype[t]===n[t]&&o.call(i.prototype,t))return f=this.baseClassNames[r]+".prototype.",u&&(e="(继承的)"),!1},this),f||(f=this.prefix+u,e="(继承的)")),this.sortInfo[this.members[t]=(i>=4?"[内置]":"")+f+r(n,t)+e]=i+t}catch(h){}},copyTo:function(n){var i,t;for(i in this.members)n.push(this.members[i]);n.length?(t=this.sortInfo,n.sort(function(n,i){return t[n]<t[i]?-1:1}),n.unshift(this.title)):n.push(this.title+"没有可用的子成员信息。")}},o(i),o(f),function(i,u){var f=[],s,o;if(arguments.length===0){for(s=0;s<7;s++)f.push(r(window,n[s]));f.push("trace 函数","assert 函数","using 函数","imports 函数");for(o in window)try{(t(o,0)||JPlus[o]===window[o])&&f.push(r(window,o))}catch(h){}f.sort(),f.unshift("全局对象: ")}else i!=null?new e(i,u).copyTo(f):f.push("无法对 "+(i===null?"null":"undefined")+" 分析")}}(),inspect:function(n,t,i){var e,r,u,f;t==null&&(t=3);switch(typeof n){case"function":return t>=3?trace.decodeUTF8(n.toString()):"function ()";case"object":if(n==null)return"null";if(t<0)return n.toString();if(typeof n.length=="number"){for(r=[],u=0;u<n.length;u++)r.push(trace.inspect(n[u],++t));return i?r.join("   "):"["+r.join(", ")+"]"}if(n.setInterval&&n.resizeTo)return"window#"+n.document.URL;if(n.nodeType)return n.nodeType==9?"document "+n.URL:n.tagName?(e=n.tagName.toLowerCase(),r=e,n.id?(r+="#"+n.id,n.className&&(r+="."+n.className)):n.outerHTML?r=n.outerHTML:(n.className&&(r+=' class=".'+n.className+'"'),r="<"+r+">"+n.innerHTML+"<\/"+e+">  "),r):"[Node type="+n.nodeType+" name="+n.nodeName+" value="+n.nodeValue+"]";r="{\r\n",f=0;for(u in n)typeof n[u]!="function"?r+="\t"+u+" = "+trace.inspect(n[u],t-1)+"\r\n":f++;return f&&(r+="\t... ("+f+"个函数)\r\n"),r+"}";case"string":return t>=3?n:'"'+n+'"';case"undefined":return"undefined";default:return n.toString()}},log:function(n){trace.enable&&window.console&&console.log&&window.console.log(n)},error:function(n){if(trace.enable)if(window.console&&console.error)window.console.error(n);else throw n;},warn:function(n){trace.enable&&(window.console&&console.warn?window.console.warn(n):window.trace("[警告]"+n))},info:function(n){trace.enable&&(window.console&&console.info?window.console.info(n):window.trace.write("[信息]"+n))},dir:function(n){if(trace.enable)if(window.console&&console.dir)window.console.dir(n);else if(n){var i="",t;for(t in n)i+=t+" = "+trace.inspect(n[t],1)+"\r\n";window.trace(i)}},clear:function(){window.console&&console.clear&&window.console.clear()},eval:function(code){if(trace.enable)try{typeof code=="function"?code():eval(code)}catch(e){return e}return""},time:function(n){var i=0,r,u=+new Date,t;try{do{for(i+=10,r=10;--r>0;)n();t=+new Date-u}while(t<100)}catch(f){}window.trace("[时间] "+t/i)}}),t(assert,{stackTrace:!0,debugStepThrough:!0,deprected:function(){},isFunction:n(function(n){return typeof n=="function"},"必须是函数。"),isArray:n(function(n){return typeof n.length=="number"},"必须是数组。"),isNumber:n(function(n){return typeof n=="number"||n instanceof Number},"必须是数字。"),isString:n(function(n){return typeof n=="string"||n instanceof String},"必须是字符串。"),isDate:n(function(n){return n&&n instanceof Date},"必须是日期对象。"),isRegExp:n(function(n){return n&&n instanceof RegExp},"必须是正则表达式。"),isObject:n(function(n){return n&&(typeof n=="object"||typeof n=="function"||typeof n.nodeType=="number")},"必须是一个引用对象。"),isNode:n(function(n){return n?typeof n.nodeType=="number"||n.setTimeout:n===null},"必须是 DOM 节点。"),isElement:n(function(n){return n?typeof n.nodeType=="number"&&n.style:n===null},"必须是 DOM 元素。"),notNull:n(function(n){return n!=null},"不可为空。")}),t(using,{loadScript:function(n){var t=using.loadText(n);if(t)try{window.execScript?window.execScript(t):window.eval.call(window,t)}catch(i){}},loadStyle:function(n){return document.getElementsByTagName("HEAD")[0].appendChild(t(document.createElement("link"),{href:n,rel:"stylesheet",type:"text/css"}))},loadText:function(n){var i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t;try{if(i.open("GET",n,!1),i.send(null),t=i.status,t>=200&&t<300||t==304||t==1223)return i.responseText;throw"服务器返回状态码 "+t;}catch(r){}finally{i=null}},styles:[],scripts:[],rootPath:function(){try{var n=document.getElementsByTagName("script");return n=n[n.length-1],n=document.constructor?n.src:n.getAttribute("src",4),(n.match(/([\S\s]*\/)System\/Core\/assets\/scripts\//)||[0,""])[1]}catch(t){return""}}(),resolve:function(n,t){return n.replace(/^([^.]+\.[^.]+)\./,t?"$1.assets.styles.":"$1.assets.scripts.").replace(/\./g,"/")}})}(),function(n){function yt(n,i){return i?i===2?function(){if(this.length){var i=new t(this[0]);return i[n].apply(i,arguments)}}:i===3?function(){var t=new r;return t.add.apply(t,this.invoke(n,arguments))}:function(){for(var u=0,i,r;u<this.length&&!i;)r=new t(this[u++]),i=r[n].apply(r,arguments);return i}:function(){for(var r=0,u=this.length,i;r<u;)i=new t(this[r++]),i[n].apply(i,arguments);return this}}function pt(n,t){for(var r=0,i;i=n[r++];)t(i)}function nt(n){return assert.isNode(n,"Dom.getDocument(node): {node} ~",n),n.ownerDocument||n.document||n}function st(n,i){return!i||(typeof i=="string"?/^(?:[-\w:]|[^\x00-\xa0]|\\.)+$/.test(i)?n.tagName===i.toUpperCase():t.match(n,i):i(n))}function tt(n,i){return i=i||n,function(r){var u=this.node[i];if(r===null)return u?new t(u):u;while(u&&u.nodeType!==1)u=u[n];return u&&st(u,r)?new t(u):null}}function ht(n,t){return t=t||n,function(i){for(var u=this.node[t],f=new r;u;)(u.nodeType===1&&st(u,i)||i===null)&&f.push(u),u=u[n];return f}}function ei(n,i,r,u){if(!u&&i.removeAttribute&&i.removeAttribute("id"),i.clearAttributes&&(i.clearAttributes(),i.mergeAttributes(n),i.$data=null,n.options&&pt(n.options,function(n){i.options.seleced=n.seleced})),r!==!1&&(r=n.$data)){i.$data=r=d({},r);var f=r.$event,e;if(f){r.$event=null,e=new t(i);for(r in f)f[r].handlers.forEach(function(t){e.on(r,t[0],t[1].node===n?e:t[1])})}}(u=t.cloneFix[n.tagName])&&(typeof u=="string"?i[u]=n[u]:u(i,n))}function oi(n){n.clearAttributes&&n.clearAttributes(),new t(n).un(),n.$data=null}function si(n,t){return t?t.toUpperCase():ci}function w(n,t){return assert.isElement(n,"Dom.styleString(elem, name): {elem} ~"),n.style[t]||s(n,t)}function b(n,i){var r,u,f;if(assert.isElement(n,"Dom.styleNumber(elem, name): {elem} ~"),r=parseFloat(n.style[i]),!r&&r!==0&&(r=parseFloat(s(n,i)),!r&&r!==0))if(i in a){u={};for(f in t.displayFix)u[f]=n.style[f];d(n.style,t.displayFix),r=parseFloat(s(n,i))||0,d(n.style,u)}else r=0;return r}function wt(n,t){return n&&typeof n=="object"?n:{x:n,y:t}}function bt(n,i){var r,u=0;try{r=n.parentNode.querySelectorAll(i)}catch(f){return y(i,new t(n.parentNode)).indexOf(n)>=0||y(i,t.document).indexOf(n)>=0}while(r[u])if(r[u++]===n)return!0;return!1}function y(n,i){var b=i,l=/\\/g,u,k,w,f,e,a,v,p,c,o,s,h;for(n=n.trim();n;){if(w=n,u=/^(^|[#.])((?:[-\w\*]|[^\x00-\xa0]|\\.)+)/.exec(n))if(!u[1]||i[u[1]==="#"?"getElementById":"getElementsByClassName"]){n=RegExp.rightContext;switch(u[1]){case"#":i=i.getElementById(u[2]),i=i?[i]:null;break;case".":i=i.getElementsByClassName(u[2]);break;default:i=i.getElements(u[2].replace(l,""))}if(!n)return new r(i)}else i=i.getElements();else if(u=/^\s*([\s>+~<])\s*(\*|(?:[-\w*]|[^\x00-\xa0]|\\.)*)/.exec(n)){n=RegExp.rightContext,e=u[2].replace(l,"");switch(u[1]){case" ":i=i.getElements(e);break;case">":i=i.children(e);break;case"+":i=i.next(e);break;case"~":i=i.nextAll(e);break;case"<":i=i.parentAll(e);break;default:kt(u[1])}}else i=i.getElements();for(i instanceof r||(i=new r(i));u=/^([#\.:]|\[\s*)((?:[-\w]|[^\x00-\xa0]|\\.)+)/.exec(n);){n=RegExp.rightContext,e=u[2].replace(l,"");switch(u[1]){case"#":f=["id","=",e];break;case".":f=["class","~=",e];break;case":":f=t.pseudos[e]||kt(e),a=undefined,(u=/^\(\s*("([^"]*)"|'([^']*)'|[^\(\)]*(\([^\(\)]*\))?)\s*\)/.exec(n))&&(n=RegExp.rightContext,a=u[3]||u[2]||u[1]);break;default:f=[e.toLowerCase()],(u=/^\s*(?:(\S?=)\s*(?:(['"])(.*?)\2|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/.exec(n))&&(n=RegExp.rightContext,u[1]&&(f[1]=u[1],f[2]=u[3]||u[4],f[2]=f[2]?f[2].replace(/\\([0-9a-fA-F]{2,2})/g,function(n,t){return String.fromCharCode(parseInt(t,16))}).replace(l,""):""))}if(v=i,p=0,i=new r,f.call)if(f.length===3)f(a,v,i);else while(c=v[p++])f(c,a)&&i.push(c);else while(c=v[p++]){o=t.getAttr(c,f[0],1),s=f[2];switch(f[1]){case undefined:h=o!=null;break;case"=":h=o===s;break;case"~=":h=(" "+o+" ").indexOf(" "+s+" ")>=0;break;case"!=":h=o!==s;break;case"|=":h=("-"+o+"-").indexOf("-"+s+"-")>=0;break;case"^=":h=o&&o.indexOf(s)===0;break;case"$=":h=o&&o.substr(o.length-s.length)===s;break;case"*=":h=o&&o.indexOf(s)>=0;break;default:throw'Not Support Operator : "'+f[1]+'"';}h&&i.push(c)}}if(u=/^\s*,\s*/.exec(n))return n=RegExp.rightContext,i.add(y(n,b));w.length===n.length&&kt(n)}return i}function kt(n){throw new SyntaxError('An invalid or illegal string was specified : "'+n+'"!');}var g;assert(!n.Dom||n.$!==n.Dom.get,"重复引入 System.Dom.Base 模块。");var i=n.document,k=n.Object,d=k.extend,ct=Array.prototype,h=k.map,lt=navigator.isStd,t=Class({node:null,dataField:function(){return this.node.$data||(this.node.$data={})},constructor:function(n){assert.isNode(n,"Dom#constructor(node): {node} 必须是 DOM 节点。"),this.node=n},attach:function(n,t){assert(n&&n.nodeType,"Dom#attach(parentNode, refNode): {parentNode} 必须是 DOM 节点。",n),assert(t===null||t.nodeType,"Dom#attach(parentNode, refNode): {refNode} 必须是 null 或 DOM 节点 。",t),n.insertBefore(this.node,t)},detach:function(n){assert(n&&n.removeChild,"Dom#detach(parentNode): {parentNode} 必须是 DOM 节点 Dom 对象。",parent),this.node.parentNode===n&&n.removeChild(this.node)},insertBefore:function(n,t){return assert(n&&n.attach,"Dom#insertBefore(childControl, refControl): {childControl} 必须 Dom 对象。",n),n.attach(this.node,t&&t.node||null),n},removeChild:function(n){return assert(n&&n.detach,"Dom#removeChild(childControl): {childControl} 必须 Dom 对象。",n),n.detach(this.node),n},equals:function(n){return this.node===n||n&&this.node===n.node}}),r=Class({length:0,constructor:function(n){if(n)for(var i;i=n[this.length];)this[this.length++]=t.getNode(i)},item:function(n){var i=this[n<0?this.length+n:n];return i?new t(i):null},invoke:function(n,i){i=i||[];var r=[];return assert(it[n]&&it[n].apply,"DomList#invoke(fnName): {fnName} 不是 Dom 对象的方法。",n),this.forEach(function(u){u=new t(u),r.push(u[n].apply(u,i))}),r},concat:function(){return assert.deprected("DomList#concat 已过时，请改用 DomList#add"),this.add.apply(this,arguments)},add:function(){for(var r=arguments,i=0,n;i<r.length;i++)if(n=r[i],j=-1,n)for(typeof n.length!="number"&&(n=[n]);++j<n.length;)this.include(t.getNode(n[j]));return this},filter:function(n){return new r(ct.filter.call(this,typeof n=="string"?function(i){return t.match(i,n)}:n))},on:yt("on"),un:yt("un"),trigger:function(n,t){return this.invoke("trigger",[n,t]).indexOf(!1)<0}}),l=Class({constructor:function(n,t){this.x=n,this.y=t},add:function(n){return assert(n&&"x"in n&&"y"in n,"Point#add(p): {p} 必须有 'x' 和 'y' 属性。",n),new l(this.x+n.x,this.y+n.y)},sub:function(n){return assert(n&&"x"in n&&"y"in n,"Point#sub(p): {p} 必须有 'x' 和 'y' 属性。",n),new l(this.x-n.x,this.y-n.y)}}),dt=Class({constructor:function(n,t){assert.notNull(n,"Dom.Event#constructor(target, type): {target} ~"),this.target=n,this.type=t},stopPropagation:function(){this.cancelBubble=!0},preventDefault:function(){this.returnValue=!1},getTarget:function(){return new t(this.orignalType&&this.currentTarget||(this.target.nodeType===3?this.target.parentNode:this.target))}}),it=t.prototype,rt=dt.prototype,hi=function(){return!0},o=i.createElement("DIV"),gt={},c={stopEvent:function(n){n.stopPropagation(),n.preventDefault()},dispatch:function(n,i,r,u){n=n.node;var f=u;if((!u||!u.type)&&(u=new t.Event(n,i),f))try{d(u,f)}catch(e){}return r(u)&&(!n[i="on"+i]||n[i](u)!==!1)},add:o.addEventListener?function(n,t,i){n.node.addEventListener(t,i,!1)}:function(n,t,i){n.node.attachEvent("on"+t,i)},remove:o.removeEventListener?function(n,t,i){n.node.removeEventListener(t,i,!1)}:function(n,t,i){n.node.detachEvent("on"+t,i)}},ni=c,ti=c,ii=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,ut=/opacity=([^)]*)/,at=/-(\w)|float/g,ri=/^(?:BODY|HTML|#document)$/i,ui=/^(?:checkbox|radio)$/,u={getProp:function(n,t){return t in n?n[t]:null},setProp:function(n,t,i){"238".indexOf(n.nodeType)===-1&&(n[t]=i)},get:function(n,t){return n.getAttribute?n.getAttribute(t):this.getProp(n,t)},set:function(n,t,i){n.setAttribute?i===null?n.removeAttribute(t):n.setAttribute(t,i):this.setProp(n,t,i)}},ft={get:function(n,t,i){return i||!(t in n)?u.get(n,t):n[t]},set:function(n,t,i){t in n?n[t]=i:u.set(n,t,i)}},vt={get:function(n,t,i){var r=t in n?n[t]:u.get(n,t);return i?r?t.toLowerCase():null:!!r},set:function(n,t,i){n[t]=i}},fi={get:function(n,i,r){var f=u.get(n,i);return r||f||(n[i].nodeType&&(n=t.createNode("form")),f=n[i]),f},set:u.set},e={$default:lt?[1,"",""]:[2,"$<div>","<\/div>"],option:[2,'<select multiple="multiple">',"<\/select>"],legend:[2,"<fieldset>","<\/fieldset>"],thead:[2,"<table>","<\/table>"],tr:[3,"<table><tbody>","<\/tbody><\/table>"],td:[4,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],col:[3,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],area:[2,"<map>","<\/map>"]},a={height:function(n){return this.node.style.height=n>0?n+"px":n<=0?"0px":n,this},width:function(n){return this.node.style.width=n>0?n+"px":n<=0?"0px":n,this}},p={innerText:"innerText"in o?"innerText":"textContent"},f={maxLength:{get:ft.get,set:function(n,t,i){i||i===0?n[t]=i:u.set(n,t,null)}},selected:{get:function(n,t,i){var r=n.parentNode;return r&&(r.selectedIndex,r.parentNode&&r.parentNode.selectedIndex),t in n?i?(i===1?n[t]:n.defaultSelected)?t:null:n[t]:u.get(n,t)},set:vt.set},checked:{get:function(n,t,i){return t in n?i?(i===1?n[t]:n.defaultChecked)?t:null:n[t]:u.get(n,t)},set:vt.set},value:{get:function(n,t,i){return t in n?i!==2?n[t]:n.defaultValue:u.get(n,t)},set:ft.set},tabIndex:{get:function(n,t,i){var r=n.getAttributeNode(t);return r=r&&r.specified&&r.value||null,i?r:+r},set:ft.set}},v={},s=n.getComputedStyle?function(n,t){assert.isElement(n,"Dom.getStyle(elem, name): {elem} ~");var i=n.ownerDocument.defaultView.getComputedStyle(n,null);return i?i[t]:null}:function(n,i){var r;if(assert.isElement(n,"Dom.getStyle(elem, name): {elem} ~"),i in a)switch(i){case"height":return n.offsetHeight===0?"auto":n.offsetHeight-t.calc(n,"by+py")+"px";case"width":return n.offsetWidth===0?"auto":n.offsetWidth-t.calc(n,"bx+px")+"px";case"opacity":return ut.test(w(n,"filter"))?parseInt(RegExp.$1)/100+"":"1"}if(r=n.currentStyle,!r)return"";if(r=r[i],/^-?\d/.test(r)&&!/^-?\d+(?:px)?$/i.test(r)){var u=n.style,f=u.left,e=n.runtimeStyle.left;n.runtimeStyle.left=n.currentStyle.left,u.left=i==="fontSize"?"1em":r||0,r=u.pixelLeft+"px",u.left=f,n.runtimeStyle.left=e}return r},ci="cssFloat"in o.style?"cssFloat":"styleFloat",et,ot;if(e.optgroup=e.option,e.tbody=e.tfoot=e.colgroup=e.caption=e.thead,e.th=e.td,h("enctype encoding action method target",fi,f),h("defaultChecked defaultSelected readOnly disabled autofocus autoplay async controls hidden loop open required scoped compact noWrap isMap declare noshade multiple noresize defer useMap",vt,f),h("readOnly tabIndex defaultChecked defaultSelected accessKey useMap contentEditable maxLength",function(n){p[n.toLowerCase()]=n}),h("innerHTML innerText textContent tagName nodeName nodeType nodeValue defaultValue selectedIndex cellPadding cellSpacing rowSpan colSpan frameBorder",function(n){p[n.toLowerCase()]=n,f[n]=ft}),v.INPUT=v.SELECT=v.TEXTAREA="value",v["#text"]=v["#comment"]="nodeValue",d(t,{get:function(n){return typeof n=="string"?(n=i.getElementById(n))&&new t(n):n?n.nodeType||n.setTimeout?new t(n):n.node?new t(n.node):t.get(n[0]):null},find:function(n){return typeof n=="string"?i.find(n):t.get(n)},query:function(n){return n?typeof n=="string"?i.query(n):n.nodeType||n.setTimeout?new r([n]):typeof n.length=="number"?n instanceof r?n:new r(n):new r([t.getNode(n)]):new r},parse:function(n,i,r){return(n=t.parseNode(n,i,r))?n.nodeType?new t(n):n:null},create:function(n,i){return new t(t.createNode(n,i||""))},getNode:function(n){return n?n.nodeType||n.setTimeout?n:n.node||(typeof n=="string"?i.getElementById(n):t.getNode(n[0])):null},createNode:function(n,t){assert.isString(n,"Dom.create(tagName, className): {tagName} ~");var r=i.createElement(n);return r.className=t,r},parseNode:function(n,t,u){var f,s,o;if(typeof n=="string")if(f=n,u=u!==!1&&f.length<512,t=t&&t.ownerDocument||i,assert(t.createElement,"Dom.parseNode(html, context, cachable): {context} 必须是 DOM 节点。",t),u&&(n=gt[f])&&n.ownerDocument===t)n=n.cloneNode(!0);else{if(s=/<([!\w:]+)/.exec(f),s){for(assert.isString(f,"Dom.parseNode(html, context, cachable): {html} ~"),n=t.createElement("div"),o=e[s[1].toLowerCase()]||e.$default,n.innerHTML=o[1]+f.trim().replace(ii,"<$1><\/$2>")+o[2],navigator.isQuirks&&pt(n.getElementsByTagName("INPUT"),function(n){ui.test(n.type)&&(n.checked=n.defaultChecked)}),s=o[0];s--;)n=n.lastChild;if(assert.isNode(n,"Dom.parseNode(html, context, cachable): 无法根据 {html} 创建节点。",f),n.previousSibling){for(o=n.parentNode,n=new r,f=o.firstChild;f;f=f.nextSibling)n.push(f);u=!1}else n.parentNode.removeChild(n);u=u&&!/<(?:script|object|embed|option|style)/i.test(f)}else n=t.createTextNode(f);u&&(gt[f]=n.cloneNode(!0))}return n},match:function(n,t){if(assert.isString(t,"Dom#find(selector): selector ~。"),n.nodeType!==1)return!1;if(!n.parentNode){var r=i.createElement("div");r.appendChild(n);try{return bt(n,t)}finally{r.removeChild(n)}}return bt(n,t)},has:o.compareDocumentPosition?function(n,t){return assert.isNode(n,"Dom.has(elem, child): {elem} ~"),assert.isNode(t,"Dom.has(elem, child): {child} ~"),!!(t&&n.compareDocumentPosition(t)&16)}:function(n,t){if(assert.isNode(n,"Dom.has(elem, child): {elem} ~"),assert.isNode(t,"Dom.has(elem, child): {child} ~"),t)while(t=t.parentNode)if(n===t)return!0;return!1},getText:function(n){return assert.isNode(n,"Dom.getText(elem, name): {elem} ~"),n[v[n.nodeName]||p.innerText]||""},getAttr:function(n,t,i){assert.isNode(n,"Dom.getAttr(elem, name): {elem} ~"),t=p[t]||t;var r=f[t];return r?r.get(n,t,i):u.get(n,t.toLowerCase(),i)},hasClass:function(n,t){return assert.isNode(n,"Dom.hasClass(elem, className): {elem} ~"),assert(t&&(!t.indexOf||!/[\s\r\n]/.test(t)),"Dom.hasClass(elem, className): {className} 不能空，且不允许有空格和换行。如果需要判断 2 个 class 同时存在，可以调用两次本函数： if(hasClass('A') && hasClass('B')) ..."),(" "+n.className+" ").indexOf(" "+t+" ")>=0},$event:{},cloneFix:{INPUT:function(n,t){ui.test(n.type)?(t.defaultChecked=t.checked=n.checked,t.value!==n.value&&(t.value=n.value)):t.value=n.value},TEXTAREA:"value",OPTION:"selected",OBJECT:function(n,t){n.parentNode&&(n.outerHTML=t.outerHTML,t.innerHTML&&!n.innerHTML&&(n.innerHTML=t.innerHTML))}},attrFix:f,propFix:p,textFix:v,styleFix:a,pseudos:{target:function(n){var i=n.id||n.name,t;return i?(t=nt(n).defaultView,i===(t.defaultView||t.parentWindow).location.hash.slice(1)):!1},empty:t.isEmpty=function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType===1||n.nodeType===3)return!1;return!0},contains:function(n,i){return t.getText(n).indexOf(i)>=0},hidden:t.isHidden=function(n){return(n.style.display||s(n,"display"))==="none"},visible:function(n){return!t.isHidden(n)},not:function(n,t){return!bt(n,t)},has:function(n,i){return y(i,new t(n)).length>0},selected:function(n){return f.selected.get(n,"selected",1)},checked:function(n){return n.checked},enabled:function(n){return n.disabled===!1},disabled:function(n){return n.disabled===!0},input:function(n){return/^(input|select|textarea|button)$/i.test(n.nodeName)},"nth-child":function(n,i,r){var u=t.pseudos;u[n]?u[n](null,i,r):(n=i[n-1])&&r.push(n)},"first-child":function(n,t,i){(n=t[0])&&i.push(n)},"last-child":function(n,t,i){(n=t[t.length-1])&&i.push(n)},"only-child":function(n){var i=new t(n.parentNode).first(n.nodeName);return i&&i.next()},odd:function(n,t,i){for(var u=0,r,f;r=t[u++];)n&&i.push(r)},even:function(n,i,r){return t.pseudos.odd(!n,i,r)}},displayFix:{position:"absolute",visibility:"visible",display:"block"},styleNumbers:h("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom",hi,{}),window:new t(n),document:new t(i),getStyle:s,styleString:w,styleNumber:b,defaultDisplay:function(n){var o=t.displays||(t.displays={}),f=n.tagName,r=o[f],e,u;return r||(n=i.createElement(f),i.body.appendChild(n),r=s(n,"display"),i.body.removeChild(n),(r==="none"||r==="")&&(e=i.body.appendChild(t.emptyIframe||(t.emptyIframe=k.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}))),u=(e.contentWindow||e.contentDocument).document,u.write("<!doctype html><html><body>"),u.close(),n=u.body.appendChild(u.createElement(f)),r=s(n,"display"),i.body.removeChild(e)),o[f]=r),r},show:function(n){assert.isElement(n,"Dom.show(elem): {elem} ~"),n.style.display="",s(n,"display")==="none"&&(n.style.display=n.style.defaultDisplay||t.defaultDisplay(n))},hide:function(n){assert.isElement(n,"Dom.hide(elem): {elem} ~");var t=w(n,"display");t!=="none"&&(n.style.$display=t,n.style.display="none")},calc:function(){function u(n){if(n.length===2){var t=n.charAt(0),u=n.charAt(1),f={m:"margin#",b:"border#Width",p:"padding#"},r={t:"Top",r:"Right",b:"Bottom",l:"Left"};if(t in f)t=f[t],n=u=="x"?"("+t.replace("#",r.l)+"+"+t.replace("#",r.r)+")":u=="y"?"("+t.replace("#",r.t)+"+"+t.replace("#",r.b)+")":t.replace("#",r[u]);else if(t=="s")return u=="x"?"e.offsetWidth":"e.offsetHeight"}else{if(n=="width"||n=="height")return'Dom.styleNumber(e,"'+n+'")';if(n.length<2)return n}return i.replace("#",n)}var r={},t,i;return n.getComputedStyle?(t="var c=e.ownerDocument.defaultView.getComputedStyle(e,null);return ",i='(parseFloat(c["#"])||0)'):(t="return ",i='(parseFloat(Dom.getStyle(e, "#"))||0)'),function(n,i){return assert.isElement(n,"Dom.calc(elem, type): {elem} ~"),assert.isString(i,"Dom.calc(elem, type): {type} ~"),(r[i]||(r[i]=new Function("e",t+i.replace(/\w+/g,u))))(n)}}(),movable:function(n){assert.isElement(n,"Dom.movable(elem): 参数 elem ~"),/^(?:abs|fix)/.test(w(n,"position"))||(n.style.position="relative")},getDocument:nt,implement:function(n,i,u){var o=[r,t],f,e;for(e in n)for(f=o.length;f--;)u&&o[f].prototype[e]||(o[f].prototype[e]=f?n[e]:yt(e,i));return this},implementIf:function(n,t){return this.implement(n,t,!0)},Event:dt}).implement({appendTo:function(n){return n?(n.append?n:t.get(n)).append(this):this.attach(i.body,null),this},remove:function(n){return assert(!arguments.length||n,"Dom#remove(child): {child} 不是合法的节点",n),arguments.length?typeof n=="string"?this.query(n).remove():this.removeChild(n):(n=this.parentControl||this.parent())?n.removeChild(this):this},empty:function(){for(var n=this.node;n=this.last(null);)this.removeChild(n);return this},dispose:function(){var n=this.node;return n.nodeType==1&&(pt(n.getElementsByTagName("*"),oi),oi(n)),this.remove()},setStyle:function(n,i){var r=this;if(assert.isString(n,"Dom#setStyle(name, value): {name} ~"),assert.isElement(r.node,"Dom#setStyle(name, value): 当前 dom 不支持样式"),arguments.length==1)r.node.style.cssText+=";"+n;else{if(n in a)return a[n].call(r,i);n=n.replace(at,si),assert(i||!isNaN(i),"Dom#setStyle(name, value): {value} 不是正确的属性值。",i),typeof i!="number"||n in t.styleNumbers||(i+="px")}return r.node.style[n]=i,r},show:function(){return t.show(this.node),this},hide:function(){return t.hide(this.node),this},toggle:function(){var n=arguments,i=n[n.length-1];return this[(typeof i=="boolean"?i:t.isHidden(this.node))?"show":"hide"].apply(this,n)},unselectable:"unselectable"in o?function(n){return assert.isElement(this.node,"Dom#unselectable(value): 当前 dom 不支持此操作"),this.node.unselectable=n!==!1?"on":"",this}:"onselectstart"in o?function(n){return assert.isElement(this.node,"Dom#unselectable(value): 当前 dom 不支持此操作"),this.node.onselectstart=n!==!1?function(){return!1}:null,this}:function(n){return assert.isElement(this.node,"Dom#unselectable(value): 当前 dom 不支持此操作"),this.node.style.MozUserSelect=n!==!1?"none":"",this},setAttr:function(n,t){var r=this.node,i;return n=p[n]||n,i=f[n],i||(i=u,n=n.toLowerCase()),i.set(r,n,t),this},set:function(n,t){var r=this,i,u;typeof n=="string"&&(i=n,n={},n[i]=t);for(i in n)t=n[i],r.node.style&&(i in r.node.style||at.test(i))?r.setStyle(i,t):typeof r[u="set"+i.capitalize()]=="function"?r[u](t):i in r?(u=r[i],typeof u=="function"?r[i](t):u&&u.set?u.set(t):r[i]=t):/^on(\w+)/.test(i)?t&&r.on(RegExp.$1,t):r.setAttr(i,t);return r},addClass:function(n){assert.isString(n,"Dom#addClass(className): {className} ~");var i=this.node,r=n.split(/\s+/),u,t;if(!i.className&&r.length<=1)i.className=n;else{for(u=" "+i.className+" ",t=0;t<r.length;t++)u.indexOf(" "+r[t]+" ")<0&&(u+=r[t]+" ");i.className=u.trim()}return this},removeClass:function(n){assert(!n||n.split,"Dom#removeClass(className): {className} ~");var u=this.node,i,t="",r;if(n){for(i=n.split(/\s+/),t=" "+u.className+" ",r=i.length;r--;)t=t.replace(" "+i[r]+" "," ");t=t.trim()}return u.className=t,this},toggleClass:function(n,t){return this[(t==undefined?this.hasClass(n):!t)?"removeClass":"addClass"](n)},setText:function(n){return this.node[v[this.node.nodeName]||p.innerText]=n,this},setHtml:function(n){if(/<(?:script|style)/i.test(n))return this.empty().append(n),this;var t=this.node,i=e.$default;assert(t.nodeType===1,"Dom#setHtml(value): {elem} 不是元素节点(nodeType === 1), 无法执行 setHtml。",t);try{t.innerHTML=(i[1]+n+i[2]).replace(ii,"<$1><\/$2>")}catch(r){return this.empty().append(n),this}if(i[0]>1)for(n=t.lastChild,t.removeChild(t.firstChild),t.removeChild(n);n.firstChild;)t.appendChild(n.firstChild);return this},setSize:function(n,i){var r=this,u=wt(n,i);return u.x!=null&&r.setWidth(u.x-t.calc(r.node,"bx+px")),u.y!=null&&r.setHeight(u.y-t.calc(r.node,"by+py")),r},setWidth:a.width,setHeight:a.height,setOffset:function(n){assert(n,"Dom#setOffset(offsetPoint): {offsetPoint} 必须有 'x' 和 'y' 属性。",n);var t=this.node.style;return n.y!=null&&(t.top=n.y+"px"),n.x!=null&&(t.left=n.x+"px"),this},setPosition:function(n,i){var u=this,r=u.getOffset().sub(u.getPosition()),f=wt(n,i);return f.y!=null?r.y+=f.y:r.y=null,f.x!=null?r.x+=f.x:r.x=null,t.movable(u.node),u.setOffset(r)},setScroll:function(n,t){var r=this.node,i=wt(n,t);return r.nodeType!==9?(i.x!=null&&(r.scrollLeft=i.x),i.y!=null&&(r.scrollTop=i.y)):(i.x==null&&(i.x=this.getScroll().x),i.y==null&&(i.y=this.getScroll().y),(r.defaultView||r.parentWindow).scrollTo(i.x,i.y)),this},bind:function(n,t){var i,r;if(typeof n=="string")if(i=(/^\w+/.exec(n)||[""])[0],assert(i,"Dom#bind(eventAndSelector, handler): {eventAndSelector} 中不存在事件信息。正确的 eventAndSelector 格式： click.selector"),r=n.substr(i.length))this.delegate(r,i,t);else this.on(i,t);else for(i in n)this.bind(i,n[i]);return this},submit:function(){var n=new t.Event(this.node,"submit");return this.trigger("submit",n),n.returnValue!==!1&&this.node.submit(),this},delegate:function(n,i,r){assert.isString(n,"Dom#delegate(selector, eventName, handler): {selector}  ~"),assert.isString(i,"Dom#delegate(selector, eventName, handler): {eventName}  ~"),assert.isFunction(r,"Dom#delegate(selector, eventName, handler): {handler}  ~");var s="delegate:"+i,u,e=t.$event[i],o,f=this.dataField();if(e&&e.delegate&&(i=e.delegate,o=e.initEvent),f=f.$event||(f.$event={}),u=f[s],!u){f[s]=u=function(n){for(var e=n.getTarget(),f=arguments.callee.handlers,r=[],i,u,t=0;t<f.length;t++)i=f[t],(u=e.closest(i[1]))&&(!o||o.call(u,n)!==!1)&&r.push([i[0],u]);for(t=0;t<r.length;t++)if(i=r[t],i[0].call(i[1],n)===!1){n.stopPropagation(),n.preventDefault();break}};this.on(i,u);u.handlers=[]}return u.handlers.push([r,n]),this}}).implement({getStyle:function(n){var t=this.node;return assert.isString(n,"Dom#getStyle(name): {name} ~"),assert(t.style,"Dom#getStyle(name): 当 Dom 对象对应的节点不是元素，无法使用样式。"),t.style[n=n.replace(at,si)]||s(t,n)},getAttr:function(n,i){return t.getAttr(this.node,n,i)},getText:function(){return t.getText(this.node)},getHtml:function(){return assert(this.node.nodeType===1,"Dom#getHtml(): 仅当 dom.nodeType === 1 时才能使用此函数。"),this.node.innerHTML},getSize:function(){var n=this.node,t,i;return n.nodeType!==9?(t=n.offsetWidth,i=n.offsetHeight):(n=n.documentElement,t=n.clientWidth,i=n.clientHeight),new l(t,i)},getWidth:function(){return b(this.node,"width")},getHeight:function(){return b(this.node,"height")},getScrollSize:function(){var n=this.node,t,i,r;return n.nodeType!==9?(t=n.scrollWidth,i=n.scrollHeight):(r=n.body,n=n.documentElement,t=Math.max(n.scrollWidth,r.scrollWidth,n.clientWidth),i=Math.max(n.scrollHeight,r.scrollHeight,n.clientHeight)),new l(t,i)},getOffset:function(){var i=this.node,n=i.style.left,t=i.style.top;if(!n||!t){if(w(i,"position")==="absolute")return t=this.offsetParent(),n=this.getPosition(),ri.test(t.node.nodeName)||(n=n.sub(t.getPosition())),n.x-=b(i,"marginLeft")+b(t.node,"borderLeftWidth"),n.y-=b(i,"marginTop")+b(t.node,"borderTopWidth"),n;n=s(i,"left"),t=s(i,"top")}return new l(parseFloat(n)||0,parseFloat(t)||0)},getPosition:function(){if(this.node.nodeType===9)return this.getScroll();var n=this.node,t=n.getBoundingClientRect(),i=nt(n),r=i.documentElement,u=i.getScroll();return new l(t.left+u.x-r.clientLeft,t.top+u.y-r.clientTop)},getScroll:function(){var n=this.node,r,t,i;return n.nodeType!==9?(t=n.scrollLeft,i=n.scrollTop):"pageXOffset"in(r=n.defaultView||n.parentWindow)?(t=r.pageXOffset,i=r.pageYOffset):(n=n.documentElement,t=n.scrollLeft,i=n.scrollTop),new l(t,i)},index:function(n){for(var i=0,t=this.node;t=t.previousSibling;)(t.nodeType===1||n===!0)&&i++;return i},child:function(n){var i="firstChild",r="nextSibling",u=typeof n=="number";for(n<0&&(n=~n,i="lastChild",r="previousSibling"),i=this.node[i];i;){if(i.nodeType===1&&(u?n--<=0:st(i,n)))return new t(i);i=i[r]}return null},parent:tt("parentNode"),closest:function(n,i){for(var r=this.node;r;){if(st(r,n))return!i||t.get(i).has(r)?new t(r):null;r=r.parentNode}return null},first:tt("nextSibling","firstChild"),last:tt("previousSibling","lastChild"),next:tt("nextSibling"),prev:tt("previousSibling"),children:ht("nextSibling","firstChild"),nextAll:ht("nextSibling"),prevAll:ht("previousSibling"),parentAll:ht("parentNode"),siblings:function(n){return this.prevAll(n).add(this.nextAll(n))},offsetParent:function(){for(var n=this.node;(n=n.offsetParent)&&!ri.test(n.nodeName)&&w(n,"position")==="static";);return new t(n||nt(this.node).body)}},2).implement({getElements:function(n){var t="getElementsByTagName",i=this[t]?this:this.node;return(n=n||"*",i[t])?i[t](n):(t="querySelectorAll",i[t])?i[t](n):[]},query:function(n){var t,f,u,e;if(assert.isString(n,"Dom#find(selector): selector ~。"),assert(n,"Dom#find(selector): {selector} 不能为空。",n),t=this.node,t.nodeType!==1)return i.query.call(this,n);try{u=t.id,e=u,u||(t.id=e="__SELECTOR__",u=0),f=t.querySelectorAll("#"+e+" "+n)}catch(o){f=y(n,this)}finally{u===0&&t.removeAttribute("id")}return new r(f)},clone:function(n,t,i){var r=this.node,f=r.cloneNode(n=n!==!1);if(r.nodeType===1){if(n)for(var o=r.getElementsByTagName("*"),e=f.getElementsByTagName("*"),u=0;e[u];u++)ei(o[u],e[u],t,i);ei(r,f,t,i)}return new this.constructor(f)}},3).implement({find:function(n){var r,f,u,e;if(assert.isString(n,"Dom#find(selector): selector ~"),r=this.node,r.nodeType!==1)return i.find.call(this,n);try{u=r.id,e=u,u||(r.id=e="__SELECTOR__",u=0),f=r.querySelector("#"+e+" "+n)}catch(o){f=y(n,this)[0]}finally{u===0&&r.removeAttribute("id")}return f?new t(f):null},hasClass:function(n){return t.hasClass(this.node,n)},match:function(n){return t.match(this.node,n)},isHidden:function(){return t.isHidden(this.node)},has:function(n,i){return typeof n=="string"?i&&this.match(n)||!!this.find(n):(n=t.getNode(n),i&&this.node===n||t.has(this.node,n))}},4),k.each({append:function(n,t){return n.insertBefore(t,null)},prepend:function(n,t){return n.insertBefore(t,n.first(null))},before:function(n,t){var i=n.parentControl||n.parent();return i?i.insertBefore(t,n):null},after:function(n,t){var i=n.parentControl||n.parent();return i?i.insertBefore(t,n.next(null)):null},replaceWith:function(n,t){var i;return(i=n.parentControl||n.parent())&&(t=i.insertBefore(t,n),i.removeChild(n)),t}},function(i,u){it[u]=function(u){var e,s,o,f;if(u=t.parse(u,this)){if(u instanceof r){for(f=t.getDocument(this.node).createDocumentFragment(),s=0;s<u.length;s++)f.appendChild(u[s]);f=new t(f),e=f.getElements("SCRIPT"),navigator.isStd||(e=new r(e)),i(this,f)}else f=u,f.node.tagName==="SCRIPT"?e=[f.node]:(e=f.getElements("SCRIPT"),navigator.isStd||(e=new r(e))),u=i(this,f);for(s=0;o=e[s++];)(!o.type||/\/(java|ecma)script/i.test(o.type))&&(o.src?(assert(n.Ajax&&Ajax.send,"必须载入 System.Ajax.Script 模块以支持动态执行 <script src=''>"),Ajax.send({url:o.src,type:"GET",dataType:"script",async:!1})):n.execScript(o.text||o.textContent||o.innerHTML||""))}return u},r.prototype[u]=function(n){var i;return typeof n=="string"?i=new r(this.invoke(u,[n])):(i=new r,n=t.get(n),this.forEach(function(r){var f=n.clone();t.get(r)[u](f),i.push(f.node)})),i}}),t.defineMethods("node","scrollIntoView focus blur select click reset",1),i.node=i,i.find=function(n){assert.isString(n,"Dom#find(selector): selector ~");var i;try{i=this.querySelector(n)}catch(r){i=y(n,this)[0]}return i?new t(i):null},i.query=function(n){assert.isString(n,"Dom#find(selector): selector ~。");var t;try{t=this.querySelectorAll(n)}catch(i){t=y(n,this)}return new r(t)},ot=i.constructor,ot?(ot.$event=t.$event,ot.base=t.base):i.constructor=t,h("on un trigger once delegate dataField getElements getPosition getSize getScroll setScroll getScrollSize has",function(n){i[n]=it[n]}),h("slice splice reverse unique shift pop unshift push include indexOf each forEach",function(n,t){r.prototype[n]=t<4?function(){return new r(ct[n].apply(this,arguments))}:ct[n]}),h("$default mousewheel blur focus scroll change select submit resize error load unload touchstart touchmove touchend hashchange",c,t.$event),lt)et="DOMContentLoaded",Event.prototype.getTarget=rt.getTarget;else if(et="readystatechange",c.initEvent=function(n){n.target=n.srcElement,n.getTarget=rt.getTarget,n.stopPropagation=rt.stopPropagation,n.preventDefault=rt.preventDefault},ni={initEvent:function(n){if(!n.getTarget){c.initEvent(n),n.relatedTarget=n.fromElement===n.srcElement?n.toElement:n.fromElement;var t=nt(n.target).documentElement;n.pageX=n.clientX+(t.scrollLeft||0)-(t.clientLeft||0),n.pageY=n.clientY+(t.scrollTop||0)-(t.clientTop||0),n.layerX=n.x,n.layerY=n.y,n.which=n.button&1?1:n.button&2?3:n.button&4?2:0}}},ti={initEvent:function(n){c.initEvent(n),n.which=n.keyCode}},t.cloneFix.SCRIPT="text",a.opacity=function(n){var t=this.node,i=t.style;return assert(!+n||n<=1&&n>=0,'Dom#setStyle("opacity", value): {value} 必须在 0~1 间。',n),assert.isElement(t,"Dom#setStyle(name, value): 当前 dom 不支持样式"),n&&(n*=100),n=n||n===0?"opacity="+n:"",t=w(t,"filter"),assert(!/alpha\([^)]*\)/i.test(t)||ut.test(t),"Dom#setOpacity(value): 当前元素的 {filter} CSS属性存在不属于 alpha 的 opacity， 将导致 setOpacity 不能正常工作。",t),i.zoom=1,i.filter=ut.test(t)?t.replace(ut,n):t+" alpha("+n+")",this},u.get=function(n,t){return n.getAttributeNode?(t=n.getAttributeNode(t),t?t.value||(t.specified?"":null):null):u.getProp(n,t)},u.set=fi.set=function(n,t,i){if(n.getAttributeNode){var r=n.getAttributeNode(t);i===null?r&&(r.nodeValue="",n.removeAttributeNode(r)):r?r.nodeValue=i:n.setAttribute(t,i)}else u.setProp(n,t,i)},f.style={get:function(n){return n.style.cssText.toLowerCase()||null},set:function(n,t,i){n.style.cssText=i||""}},navigator.isQuirks){f.value={_get:f.value.get,get:function(n,t,i){return n.tagName==="BUTTON"?u.get(n,t):this._get(n,t,i)},set:function(n,t,i){n.tagName==="BUTTON"?u.set(n,t,i):n.value=i||""}},f.href=f.src=f.useMap=f.width=f.height={get:function(n,t){return n.getAttribute(t,2)},set:function(n,t,i){n.setAttribute(t,i)}},f.contentEditable={get:function(n,t){return t=n.getAttributeNode(t),t&&t.specified?t.value:null},set:function(n,t,i){i===null?n.removeAttributeNode(n.getAttributeNode(t)):u.set(n,t,i||"false")}};try{i.execCommand("BackgroundImageCache",!1,!0)}catch(ai){}}if(t.addEvents("click dblclick mousedown mouseup mouseover mouseenter mousemove mouseleave mouseout contextmenu selectstart selectend",ni),t.addEvents("keydown keypress keyup",ti),o.onfocusin===undefined&&t.addEvents("focusin focusout",{fix:function(n,t,i){var r=t==="focusin"?"focus":"blur",u=n.node.ownerDocument||n.node;u[i](r,this.handler,!0)},handler:function(n){for(var r=n.orignalType=n.type==="focus"?"focusin":"focusout",t=n.getTarget();t;){if(!t.trigger(r,n))return;t=t.parent()}i.trigger(r,n)},add:function(n,t){this.fix(n,t,"addEventListener")},remove:function(){this.fix(elem,type,"removeEventListener")}}),o.onmousewheel===undefined&&t.addEvents("mousewheel",{base:"DOMMouseScroll"}),navigator.isFirefox&&t.addEvents("click",{initEvent:function(n){return n.which===undefined||n.which===1}}),k.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(n,i){t.addEvents(i,{initEvent:function(n){if(n.type!==i){var r=n.relatedTarget;return n.orignalType=i,this.node!==r&&!t.has(this.node,r)}},base:o.onmouseenter===null?null:n,delegate:n})}),t.addEvents("focus",{delegate:"focusin"}).addEvents("blur",{delegate:"focusout"}),t.$event.domready=t.$event.domload={},h("ready load",function(n,r){var u=r?"isLoaded":"isReady";return n="dom"+n,function(f,e){var o=typeof f=="function";if(t[u])o&&f.call(e);else if(o)i.on(n,f,e);else i.body?(r?(o=t.window,f=n,t.ready()):(o=i,f=et),c.remove(o,f,arguments.callee),t[u]=!0,i.trigger(n,f)&&i.un(n)):setTimeout(arguments.callee,1);return i}},t),i.readyState!=="complete"){if(c.add(i,et,t.ready),c.add(t.window,"load",t.load,!1),!lt){g=!1;try{g=n.frameElement==null&&i.documentElement}catch(ai){}g&&g.doScroll&&function li(){if(!t.isReady){try{g.doScroll("left")}catch(n){return setTimeout(li,50)}t.ready()}}()}}else setTimeout(t.load,1);o=null,n.Dom=t,n.DomList=r,n.Point=l,n.$=n.$||t.get,n.$$=n.$$||t.query}(this),Deferrable=Class({chain:function(n,t){var i=[n,t];this._firstTask?this._lastTask[2]=i:this._firstTask=i,this._lastTask=i},progress:function(){var n=this._firstTask;return this.isRunning=!1,n&&(this._firstTask=n[2],n[0].run(n[1])),this},defer:function(n,t){var i=this.isRunning;if(this.isRunning=!0,!i)return!1;switch(t){case undefined:break;case"abort":case"stop":case"skip":return this[t](),this.isRunning=!0,!1;case"replace":this.init(this.options=Object.extend(this.options,n));case"ignore":return!0;default:assert(t==="wait","Deferred#defer(args, link): 成员 {link} 必须是 wait、abort、stop、ignore、replace 之一。",t)}return this.chain(this,n),!0},wait:function(n){return this.isRunning&&this.stop(),this.defer=n.defer.bind(n),this.progress=n.progress.bind(n),this},then:function(n,t){return this.isRunning?this.chain({owner:this,run:function(t){n.call(this.owner,t)!==!1&&this.owner.progress()}},t):n.call(this,t),this},delay:function(n){return this.run({duration:n})},pause:Function.empty,skip:function(){return this.pause(),this.progress(),this},abort:function(){return this.pause(),this._firstTask=this._lastTask=null,this.isRunning=!1,this},stop:function(){return this.abort()}}),Ajax=function(){var t,i,r=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,u=["*/"]+["*"],n;try{t=location.href}catch(f){t=document.createElement("a"),t.href="",t=t.href}return i=r.exec(t.toLowerCase())||[],n=Deferrable.extend({options:{url:t,timeout:-1},constructor:function(){},run:function(t,u){var e=this,f;return e.defer(t,u)||(t=Object.extend({owner:e,timeout:e.options.timeout},t),assert(!t.url||t.url.replace,"Ajax#run(xhrObject): {xhrObject.url} 必须是字符串。",t.url),t.url=t.url?t.url.replace(/#.*$/,""):e.options.url,t.data=t.data?typeof t.data!="string"?n.param(t.data):t.data:null,t.crossDomain==null&&(f=r.exec(t.url.toLowerCase()),t.crossDomain=!!(f&&(f[1]!=i[1]||f[2]!=i[2]||(f[3]||(f[1]==="http:"?80:443))!=(i[3]||(i[1]==="http:"?80:443))))),(n.transports[t.dataType]||n.transports.text)(t)),e},pause:function(){return this.callback&&this.callback("Aborted",-3),this}}),Object.extend(n,{send:function(t){return(new n).run(t)},transports:{},accepts:{},dataParsers:{},param:function(t,i){var r;return t&&typeof t=="object"?(r=[],Object.each(t,function(t,u){r.push(n.param(t,i?i+"["+u+"]":u))}),r=r.join("&")):r=encodeURIComponent(i)+"="+encodeURIComponent(t),r.replace(/%20/g,"+")},concatUrl:function(n,t){return t?n+(n.indexOf("?")>=0?"&":"?")+t:n},addCachePostfix:function(t){return/[?&]_=/.test(t)?t:n.concatUrl(t,"_="+Date.now()+JPlus.id++)},checkStatus:function(n){if(!n){var t=window.location.protocol;return t=="file: "||t=="chrome: "||t=="app: "}return n>=200&&n<300||n==304||n==1223},createNativeRequest:window.ActiveXObject?function(){return new ActiveXObject("Microsoft.XMLHTTP")}:function(){return new XMLHttpRequest},done:function(t,i,r,u,f,e){var o;if(i)t.errorMessage=f,o="error";else{try{f=f.call(n.dataParsers,t)}catch(s){return n.done(t,2,r,u,s.message,e)}o="success"}t.errorCode=i,t.status=r,t.statusText=u,e&&e();try{t[o]&&t[o].call(t.owner,f,t),t.complete&&t.complete.call(t.owner,i,t)}finally{t.xhr=null,t.owner.progress()}},error:function(n,t){n.xhr={readyState:4},n.errorThrown=t,n.owner.callback(t.message,-1)}}),n.dataParsers.text=function(n){var t;try{t=n.xhr.responseText}catch(i){t=""}return n.responseText=t},n.transports.text=function(t,i,r){var f={},e,o,s;t.type=t.type?t.type.toUpperCase():"GET",t.async=t.async!==!1,t.data&&t.type==="GET"&&(t.url=n.concatUrl(t.url,t.data),t.data=null),t.cache!==!0&&(t.url=n.addCachePostfix(t.url)),f.Accept=t.dataType in n.accepts?n.accepts[t.dataType]+", "+u+"; q=0.01":u,t.data&&(f["Content-Type"]="application/x-www-form-urlencoded; charset="+(t.charset||"UTF-8")),t.charset&&(f["Accept-Charset"]=value),t.crossDomain||(f["X-Requested-With"]="XMLHttpRequest");for(o in t.headers)f[o]=t.headers[o];if(t.xhr=e=n.createNativeRequest(),t.owner.callback=s=function(u,f){var e=t.xhr,s,o;try{if(!e||!f&&e.readyState!==4)return;if(e.onreadystatechange=t.owner.callback=Function.empty,f)e.readyState!==4&&e.abort(),s=f,o="";else{s=e.status;try{o=e.statusText}catch(c){o=""}n.checkStatus(s)?u=i||n.dataParsers[t.dataType]||n.dataParsers.text:(f=1,u=o)}e=null}catch(h){return n.error(t,h)}n.done(t,f,s,o,u,r)},t.start&&t.start.call(t.owner,t.data,t)===!1)return s("Prevented",-3);try{t.username?e.open(t.type,t.url,t.async,t.username,t.password):e.open(t.type,t.url,t.async)}catch(h){return n.error(t,h)}for(o in f)try{e.setRequestHeader(o,f[o])}catch(l){}try{e.send(t.data)}catch(c){return n.error(t,c)}t.async?e.readyState===4?setTimeout(s,0):(e.onreadystatechange=s,t.timeouts>0&&setTimeout(function(){s("Timeout",-2)},t.timeouts)):s()},Object.map("get post",function(t){n[t]=function(i,r,u,f,e){return typeof r=="function"&&(e=f,f=u,u=r,r=null),n.send({url:i,data:r,success:u,error:f,type:t,dataType:e})}}),n}(),Ajax.accepts.script="text/javascript, application/javascript, application/ecmascript, application/x-ecmascript",Ajax.dataParsers.script=function(n){window.execScript(this.text(n))},Ajax.transports.script=function(n,t,i){if(!n.crossDomain)return Ajax.transports.text(n,t&&function(n){return this.script(n),t(n)},i);var r,f,u;if(n.type="GET",n.cache!==!1&&(n.cache=!1,n.url=Ajax.addCachePostfix(n.url)),n.data&&(n.url=Ajax.concatUrl(n.url,n.data),n.data=null),n.xhr=r=document.createElement("SCRIPT"),n.owner.callback=u=function(r,u){var f=n.xhr;f&&(u||!f.readyState||!/in/.test(f.readyState))&&(n.owner.callback=Function.empty,f.onerror=f.onload=f.onreadystatechange=null,f.parentNode.removeChild(f),f=null,u?Ajax.done(n,u,u,"",r,i):Ajax.done(n,0,200,"OK",t||Function.empty,i))},r.src=n.url,r.type="text/javascript",r.async="async",n.charset&&(r.charset=n.charset),n.start&&n.start.call(n.owner,n.data,n)===!1)return u("Prevented",-3);r.onload=r.onreadystatechange=u,r.onerror=function(){u("Script Execute Error",2)},n.timeouts>0&&setTimeout(function(){u("Timeout",-2)},n.timeouts),f=document.getElementsByTagName("SCRIPT")[0],f.parentNode.insertBefore(r,f)},Ajax.transports.jsonp=function(n){n.jsonp===undefined&&(n.jsonp="callback");var t=n.jsonpCallback||(n.jsonpCallback="jsonp"+Date.now()+JPlus.id++),r=window[t],i;n.jsonp&&(n.url=n.url.indexOf(n.jsonp+"=?")>=0?n.url.replace(n.jsonp+"=?",n.jsonp+"="+t):Ajax.concatUrl(n.url,n.jsonp+"="+t)),window[t]=function(){i=arguments},Ajax.transports.script(n,function(){if(!i)throw new Error(t+" was not called");return i[0]},function(){window[t]=r})},Ajax.jsonp=function(n,t,i,r){return typeof t=="function"&&(r=i,i=t,t=null),Ajax.send({url:n,dataType:"jsonp",data:t,success:i,error:r})},Fx=function(){function t(){for(var n=this.length;--n>=0;)this[n].step()}var n={};return Deferrable.extend({options:{duration:300,fps:50,transition:function(n){return-(Math.cos(Math.PI*n)-1)/2}},init:Function.empty,set:Function.empty,step:function(){var n=this,i=Date.now()-n.time,t=n.options;i<t.duration?n.set(t.transition(i/t.duration)):n.end(!1)},run:function(n,t){var i=this,u,r;return i.defer(n,t)||(u=i.options,i.options=n=Object.extend({transition:u.transition,fps:u.fps},n),r=n.duration,assert(r==undefined||r===0||+r,"Fx#run(options, link): {duration} 必须是数字。如果需要使用默认的时间，使用 -1 。",r),n.duration=r!==-1&&r!=undefined?r<0?-u.duration/r:r:u.duration,n.start&&n.start.call(n.target,n,i)===!1?i.progress():(i.init(n),i.set(0),i.time=0,i.resume())),i},delay:function(n){return this.run({duration:n})},end:function(n){var t=this;t.pause(),t.set(1);try{t.options.complete&&t.options.complete.call(t.options.target,n,t)}finally{delete t.options,t.progress()}return t},stop:function(){return this.abort(),this.end(!0),this},pause:function(){var t=this,i,r;return t.timer&&(t.time=Date.now()-t.time,i=t.options.fps,r=n[i],r.remove(t),r.length===0&&(clearInterval(t.timer),delete n[i]),t.timer=0),t},resume:function(){var i=this,r,u;return i.timer||(i.time=Date.now()-i.time,r=i.options.fps,u=n[r],u?(u.push(i),i.timer=u[0].timer):i.timer=setInterval(t.bind(n[r]=[i]),Math.round(1e3/r))),i}})}(),Object.extend(Fx,{tweeners:{},defaultTweeners:[],numberTweener:{get:function(n,t){return Dom.styleNumber(n.node,t)},compute:function(n,t,i){return(t-n)*i+n},parse:function(n){return typeof n=="number"?n:parseFloat(n)},set:function(n,t,i){n.node.style[t]=i}},Tween:Fx.extend({constructor:function(){},set:function(n){var u=this.options,f=u.params,e=u.target,i,r,t;for(r in f)t=f[r],i=t.tweener,i.set(e,r,i.compute(t.from,t.to,n))},init:function(n){var r,t,e,f,i,u,o={};for(r in n.params){if(f=n.params[r],typeof f=="string"&&(e=/^([+-]=|(.+?)-)(.*)$/.exec(f))&&(f=e[3]),t=Fx.tweeners[r=r.toCamelCase()],!t){if(r in Dom.styleNumbers)t=Fx.numberTweener;else{for(u=Fx.defaultTweeners.length;u-->0;)if(i=Fx.defaultTweeners[u].parse(f,r),i||i===0){t=Fx.defaultTweeners[u];break}if(!t)continue}Fx.tweeners[r]=t}e?(i=e[2],u=i?t.parse(i):t.get(n.target,r),i=i?t.parse(f):u+parseFloat(e[1]==="+="?f:"-"+f)):(i=t.parse(f),u=t.get(n.target,r)),o[r]={tweener:t,from:u,to:i},assert(u!==null&&i!==null,"Fx.Tween#init(options): 无法正确获取属性 {key} 的值({from} {to})。",r,u,i)}n.params=o}}),createTweener:function(n){return Object.extendIf(n,Fx.numberTweener)}}),Object.each(Dom.styleFix,function(n,t){Fx.tweeners[t]=this},Fx.createTweener({set:function(n,t,i){Dom.styleFix[t].call(n,i)}})),Fx.tweeners.scrollTop=Fx.createTweener({set:function(n,t,i){n.setScroll(null,i)},get:function(n){return n.getScroll().y}}),Fx.tweeners.scrollLeft=Fx.createTweener({set:function(n,t,i){n.setScroll(i)},get:function(n){return n.getScroll().x}}),Fx.defaultTweeners.push(Fx.createTweener({set:navigator.isStd?function(n,t,i){n.node.style[t]=i+"px"}:function(n,t,i){try{n.node.style[t]=i}catch(r){}}})),function(){function n(n,t,i){n.orignal[i]=t.style[i],t.style[i]=Dom.styleNumber(t,i)+"px"}function r(n){var t=n[1];return t&&typeof t=="object"?n=n[0]:t=null,n=!n[0]||typeof n[0]!="object"?{duration:n[0],callback:n[1],link:n[2]}:n[0],Object.extendIf(n,t),n.effect?n.duration===undefined&&(n.duration=-1):n.effect="opacity",n.callback=n.callback||Function.empty,assert(Fx.displayEffects[n.effect],"Dom#toggle(effect, duration, callback, link): 不支持 {effect} 。",n.effect),n}var u={opacity:0},t=Fx.displayEffects={opacity:function(){return u}},f=Dom.prototype.toggle,e=Array.prototype.shift,i="height marginTop paddingTop marginBottom paddingBottom";Object.each({all:i+" opacity width",height:i,width:"width marginLeft paddingLeft marginRight paddingRight"},function(i,r){i=Object.map(i,this,{}),t[r]=function(t,u){return t.orignal.overflow=u.style.overflow,u.style.overflow="hidden",Dom.styleString(u,"display")==="inline"&&(t.orignal.display=u.style.display,u.style.display="inline-block"),r==="height"?n(t,u,"width"):r==="width"&&n(t,u,"height"),i}},function(){return 0}),Object.map("left right top bottom",function(t,i){return t="margin"+t.capitalize(),function(r,u,f){u.parentNode.style.overflow="hidden";var h={},o,e,s,c;return i<=1?(s=i===0?"marginRight":"marginLeft",o=-u.offsetWidth-Dom.styleNumber(u,s),e=Dom.styleNumber(u,t),h[t]=f?o+"-"+e:e+"-"+o,n(r,u,"width"),c=e-o,e=Dom.styleNumber(u,s),o=e+c,h[s]=f?o+"-"+e:e+"-"+o):(s=i===2?"marginBottom":"marginTop",o=-u.offsetHeight-Dom.styleNumber(u,s),e=Dom.styleNumber(u,t),h[t]=f?o+"-"+e:e+"-"+o),h}},t),Dom.implement({fx:function(){var n=this.dataField();return n.$fx||(n.$fx=new Fx.Tween)}},2).implement({animate:function(n,t,i,r){return assert.notNull(n,"Dom#animate(params, duration, oncomplete, link): {params} ~",n),n.params?r=n.link:n={params:n,duration:t,complete:i},n.target=this,assert(!n.duration||typeof n.duration=="number","Dom#animate(params, duration, callback, link): {duration} 必须是数字。如果需要制定为默认时间，使用 -1 。",n.duration),assert(!n.complete||typeof n.complete=="function","Dom#animate(params, duration, callback, link): {callback} 必须是函数",n.complete),this.fx().run(n,r),this},show:function(){var t=this,n=arguments;return n.length===0?Dom.show(t.node):(n=r(n),n.duration==null?(Dom.show(t.node),n.callback.call(t,!1,!1)):t.fx().run({target:t,duration:n.duration,start:function(i){var u=this.node,f,e,r;if(!Dom.isHidden(u))return n.callback.call(t,!0,!0),!1;Dom.show(u),i.orignal={},i.params=e={},f=Fx.displayEffects[n.effect](i,u,!0);for(r in f)i.orignal[r]=u.style[r];for(r in f)f[r]===0?(e[r]=Dom.styleNumber(u,r),u.style[r]=0):e[r]=f[r]},complete:function(i,r){Object.extend(this.node.style,r.options.orignal),n.callback.call(t,!1,i)}},n.link)),t},hide:function(){var t=this,n=arguments;return n.length===0?Dom.hide(t.node):(n=r(n),n.duration===null?(Dom.hide(t.node),n.callback.call(t,!1,!1)):t.fx().run({target:t,duration:n.duration,start:function(i){var r=this.node,f,u;if(Dom.isHidden(r))return n.callback.call(t,!1,!0),!1;i.orignal={},i.params=f=Fx.displayEffects[n.effect](i,r,!1);for(u in f)i.orignal[u]=r.style[u]},complete:function(i,r){var u=this.node;Dom.hide(u),Object.extend(u.style,r.options.orignal),n.callback.call(t,!1,i)}},n.link)),this},toggle:function(){var n=this;return n.fx().then(function(t){return f.apply(n,t),!1},arguments),n}})}()
//@ sourceMappingURL=core.min.js.map